# PhotoWatermark 更新日志

## [4.0.0] - 2025-01-25

### 🎯 重大更新 - 现代化GUI版本
- ✅ **全新现代化界面**: 完全重新设计的用户界面，提供更好的用户体验
- ✅ **拖拽功能**: 支持直接拖拽图片文件和文件夹到应用窗口
- ✅ **实时预览**: 所见即所得的水印预览功能
- ✅ **交互式水印定位**: 支持在预览区域直接拖拽调整水印位置
- ✅ **批量处理**: 支持同时处理多张图片
- ✅ **文件管理**: 内置图片列表管理，支持添加、删除、切换预览

### 🔧 功能增强
- 🔧 **拖拽方向修复**: 修复了水印拖拽方向相反的问题
- 🔧 **错误处理优化**: 改进了拖拽过程中的错误处理机制
- 🔧 **性能优化**: 优化了预览更新和拖拽响应性能
- 🔧 **水印指示器**: 改进了文本和图片水印的可视化指示器

### 🎨 界面改进
- 🎨 **现代化设计**: 采用现代化的界面设计风格
- 🎨 **响应式布局**: 支持窗口大小调整和自适应布局
- 🎨 **直观操作**: 简化了操作流程，提高了易用性
- 🎨 **状态反馈**: 提供清晰的操作状态和进度反馈

### 📦 技术升级
- 📦 **版本管理**: 添加了完整的版本信息管理
- 📦 **打包支持**: 支持打包成独立的可执行文件
- 📦 **依赖优化**: 优化了依赖库的使用和管理

---

## [1.2.0] - 2024-09-24

### 新增功能
- ✅ **模板管理系统**: 完整的水印模板保存、加载、删除功能
- ✅ **图片水印支持**: 支持添加PNG/JPEG图片作为水印
- ✅ **透明度控制**: 精确控制文本和图片水印的透明度(0-100%)
- ✅ **输出格式选择**: 支持JPEG和PNG格式输出，满足不同需求
- ✅ **JPEG质量控制**: 可调节JPEG输出质量(1-100)
- ✅ **组合水印**: 支持同时添加文本和图片水印
- ✅ **命令行模板支持**: 通过`--template`参数使用保存的模板

### 改进功能
- 🔧 **批量处理优化**: 改进目录批量处理的性能和稳定性
- 🔧 **错误处理增强**: 更好的错误提示和异常处理
- 🔧 **字体加载优化**: 改进macOS系统字体加载机制
- 🔧 **EXIF处理**: 优化EXIF时间信息提取和处理

### 技术改进
- 📦 **项目结构**: 完善的setup.py和requirements.txt
- 📦 **构建脚本**: 添加build_executable.py用于创建可执行文件
- 📚 **文档完善**: 详细的README.md和使用说明
- 🧪 **测试工具**: 添加测试图片生成和功能验证脚本

### 模板管理功能
```bash
# 保存模板
python template_manager.py save "模板名" --font-size 30 --color white

# 列出模板
python template_manager.py list

# 使用模板
python photo_watermark.py input.jpg --template "模板名"
```

### 新增命令行参数
- `--template`: 使用保存的水印模板
- `--image-watermark`: 指定图片水印文件路径
- `--opacity`: 设置透明度(0-100)
- `--format`: 选择输出格式(JPEG/PNG)
- `--quality`: 设置JPEG质量(1-100)

---

## [1.1.0] - 2024-09-18

### 新增功能
- ✅ **图片水印**: 支持PNG/JPEG图片作为水印
- ✅ **透明度控制**: 基础透明度调节功能
- ✅ **输出格式**: 支持JPEG和PNG格式输出

### 改进功能
- 🔧 **水印位置**: 支持9个预设位置
- 🔧 **颜色支持**: 扩展颜色选项和RGB格式支持
- 🔧 **批量处理**: 改进目录批量处理功能

---

## [1.0.0] - 2024-09-15

### 初始版本
- ✅ **基础水印功能**: 文本水印添加
- ✅ **EXIF时间提取**: 自动从图片EXIF信息提取拍摄时间
- ✅ **命令行界面**: 完整的CLI支持
- ✅ **批量处理**: 支持目录批量处理
- ✅ **多格式支持**: 支持JPEG、PNG、TIFF、BMP格式
- ✅ **GUI界面**: 基于CustomTkinter的图形界面(实验性)

### 核心功能
- 自动时间水印基于EXIF信息
- 自定义文本水印
- 可调节字体大小、颜色、位置
- 支持单文件和批量处理
- 跨平台支持(Windows/macOS/Linux)

---

## 计划功能 (未来版本)

### v1.3.0 (计划中)
- 🔄 **GUI兼容性**: 解决macOS系统GUI兼容性问题
- 🔄 **水印预设**: 更多内置水印样式和模板
- 🔄 **性能优化**: 大文件处理性能优化
- 🔄 **插件系统**: 支持自定义水印效果插件

### v1.4.0 (计划中)
- 🔄 **云端同步**: 模板云端同步功能
- 🔄 **批量编辑**: 高级批量编辑和预览功能
- 🔄 **水印动画**: 支持GIF动态水印
- 🔄 **API接口**: RESTful API支持

---

## 技术栈

- **语言**: Python 3.7+
- **图像处理**: Pillow (PIL)
- **GUI框架**: CustomTkinter + Tkinter
- **打包工具**: PyInstaller
- **依赖管理**: pip + requirements.txt

## 贡献者

感谢所有为PhotoWatermark项目做出贡献的开发者！

## 许可证

本项目采用MIT许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。